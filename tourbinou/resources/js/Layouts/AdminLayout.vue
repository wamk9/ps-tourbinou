<script setup>
import Auth from '@/Helpers/Api/Auth.js'
import Loading from '@/Components/Loading.vue'
</script>


<template>
    <Loading v-if="!onComplete"/>

    <nav id="admin-navbar" class="flex items-center justify-between flex-wrap bg-teal-500 p-6">
        <div class="flex items-center flex-shrink-0 mr-6">
            <svg id="hero-logo" viewBox="0 0 320 88" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M83.7211 22.1954V23.4367C83.7211 37.1887 83.5738 50.9408 83.7756 64.6875C83.8957 72.8907 77.9158 81.3286 68.6104 82.9463C67.6942 83.0851 66.7679 83.1462 65.8414 83.1291C60.7373 83.1482 55.6331 83.1291 50.5316 83.1618C49.4568 83.1618 48.5593 82.7362 47.6235 82.3434C40.4269 79.3425 36.936 73.9556 37.1506 66.1824C37.1887 64.8566 37.1506 63.528 37.2624 62.1613C38.4218 64.2783 39.7531 66.2152 41.5673 67.8138C44.0225 69.9963 46.9633 70.9101 50.1142 71.3603C51.2873 71.5294 51.3473 70.8147 51.3446 69.9226C51.3091 58.6257 51.3146 47.3316 51.2546 36.0348C51.2546 34.728 51.5028 34.4552 52.9296 34.488C58.724 34.6107 64.5565 35.0036 70.31 34.3625C76.5845 33.6641 80.4038 29.542 82.8045 23.9604C83.0773 23.3575 83.2846 22.7383 83.5219 22.1272L83.7211 22.1954Z" fill="#FE7F00"/>
                <path d="M2.84263 19.4701C3.79199 10.3147 9.70913 3.86292 18.5726 2.35158C19.3069 2.24636 20.0488 2.20256 20.7905 2.22063C35.822 2.22063 50.8545 2.22063 65.8878 2.22063C74.6176 2.22063 82.5289 9.22899 83.6201 17.836C83.7796 18.8931 83.6861 19.9729 83.3473 20.9869C81.1158 27.3187 77.1737 31.7899 70.2227 32.9412C68.313 33.2604 66.3652 33.0066 64.3928 32.9685C66.237 31.8772 67.9748 30.7205 69.4152 29.1492C71.8049 26.5603 72.9344 23.4585 73.2345 20.0048C73.2945 19.3118 72.9616 19.1154 72.3233 19.1345C71.4421 19.1591 70.561 19.1345 69.6771 19.1345C56.6861 19.1345 43.6951 19.1618 30.7042 19.1345C24.135 19.1127 19.3691 22.0099 16.3246 27.7661C15.5642 29.2993 15.1163 30.9685 15.007 32.6766C14.9306 33.5659 14.6087 33.9124 13.793 34.2015C8.49242 36.0784 5.30606 39.9304 3.6856 45.1983C3.66105 45.7821 3.75107 46.3959 3.2573 46.8624C2.67349 47.0834 2.78534 46.6196 2.77989 46.3468C2.76079 45.1465 2.77989 43.9461 2.77989 42.743C2.77989 35.4883 2.77989 28.2335 2.77989 20.9787C2.73463 20.4752 2.75573 19.968 2.84263 19.4701Z" fill="#00BB98"/>
                <path d="M3.97205 45.5584C5.88168 40.9535 8.86343 37.4152 13.7194 35.7183C15.8674 34.9654 18.1268 34.579 20.4031 34.5753C24.948 34.5753 29.4957 34.6107 34.0433 34.5425C35.1864 34.5262 35.5219 34.8017 35.5165 35.9748C35.4673 46.0685 35.421 56.1623 35.5165 66.2561C35.5656 71.5376 37.0169 76.3199 41.4881 79.7026C43.2614 81.0476 45.2747 81.9724 47.6835 83.0472C46.9633 83.0936 46.6332 83.1345 46.3004 83.1345C37.8435 83.1345 29.4138 83.1591 20.9705 83.1345C11.1495 83.1045 3.06088 75.185 2.89447 65.4022C2.80717 60.2189 2.89447 55.0356 2.85355 49.8523C2.85355 49.0339 3.19455 48.3192 3.25457 47.5362C3.13726 47.2225 3.31731 46.9497 3.38006 46.6578C3.54647 46.2677 3.57648 45.8148 3.97205 45.5584Z" fill="#FEC500"/>
                <path d="M190.691 34.3161C190.691 30.194 190.723 26.072 190.669 21.9526C190.655 20.8368 190.941 20.3403 192.136 20.4303C193.388 20.4972 194.642 20.4972 195.893 20.4303C196.853 20.3976 197.243 20.8232 197.211 21.7534C197.14 23.8786 197.17 26.0038 197.104 28.1316C196.99 31.7845 197.082 35.4455 197.164 39.1011C197.219 41.6409 196.891 44.1862 197.26 46.7178C197.835 50.7308 200.932 53.2651 205.021 53.0933C208.709 52.9432 211.615 49.9342 211.868 46.0003C212.108 42.2438 209.432 38.9729 205.667 38.3127C203.856 37.9935 201.338 38.3127 199.538 38.2227C198.834 38.1927 198.555 38.0481 198.583 37.2924C198.637 35.7674 198.599 34.237 198.599 32.7093C198.599 32.2319 198.572 31.7517 199.273 31.7545C202.882 31.7736 207.236 31.5253 210.646 33.184C216.648 36.1084 219.717 42.5166 218.148 49.053C216.656 55.273 210.826 59.6924 204.306 59.5315C198.304 59.3896 193.315 55.8622 191.299 50.3543C190.864 49.0838 190.659 47.7464 190.691 46.4041C190.691 42.3748 190.691 38.3454 190.691 34.3161Z" fill="#FE7700"/>
                <path d="M170.367 40.6097C170.217 42.9859 170.658 45.8667 170.023 48.7093C168.514 55.4585 162.507 59.8943 155.354 59.5124C148.717 59.1659 143.078 53.9635 142.393 47.3562C141.899 42.5603 142.287 37.7316 142.21 32.9193C142.21 32.1009 142.682 31.7818 143.454 31.7845C144.799 31.7845 146.147 31.8254 147.489 31.7708C148.646 31.7245 149.031 32.2373 149.022 33.3477C148.987 37.4697 149.006 41.5891 149.022 45.7112C149.022 48.6002 150.318 50.8126 152.793 52.2285C157.474 54.9156 163.459 51.5519 163.59 46.1422C163.694 41.9792 163.617 37.808 163.623 33.6423C163.623 31.8854 163.724 31.7899 165.533 31.7845C166.692 31.7845 167.854 31.8118 169.013 31.7845C170.02 31.7517 170.41 32.1773 170.378 33.1894C170.337 35.4946 170.367 37.8107 170.367 40.6097Z" fill="#FE9100"/>
                <path d="M315.668 40.5306C315.504 42.8958 315.965 45.7739 315.36 48.6165C313.979 55.112 308.057 59.7279 301.337 59.5287C294.395 59.3323 288.622 54.4409 287.768 47.7545C287.138 42.844 287.643 37.868 287.531 32.9221C287.514 32.1991 287.855 31.7899 288.622 31.7899C290.152 31.7899 291.683 31.7899 293.213 31.7899C294.193 31.7899 294.283 32.4174 294.28 33.1867C294.28 37.1205 294.28 41.0517 294.28 44.9855C294.28 47.5526 294.976 49.8032 297.065 51.4864C299.441 53.3961 302.074 53.6689 304.753 52.4358C307.432 51.2027 308.864 48.9848 308.93 46.0549C309.02 41.8919 308.957 37.7262 308.965 33.5632C308.965 31.8581 309.039 31.7927 310.793 31.7845C311.999 31.7845 313.204 31.8063 314.408 31.7845C315.341 31.7627 315.722 32.1309 315.703 33.0994C315.635 35.4101 315.668 37.7234 315.668 40.5306Z" fill="#FE4400"/>
                <path d="M257.143 51.1591C257.143 53.8189 257.08 55.9986 257.17 58.1702C257.219 59.3296 256.756 59.6133 255.716 59.5669C254.419 59.5001 253.118 59.5001 251.821 59.5669C250.645 59.6324 250.432 59.0486 250.438 58.042C250.47 53.9226 250.484 49.8032 250.438 45.6839C250.394 41.2017 246.809 37.9608 242.343 38.2963C238.631 38.5691 235.772 41.7664 235.731 45.7685C235.69 49.8878 235.684 54.0099 235.731 58.1292C235.747 59.2368 235.395 59.6188 234.309 59.5642C232.921 59.4987 231.527 59.5369 230.135 59.5642C229.385 59.5642 228.998 59.245 229.017 58.4921C229.14 53.4998 228.61 48.4801 229.29 43.5151C230.193 36.7632 236.044 31.9073 243.08 31.82C246.351 31.7941 249.528 32.9204 252.052 35.0013C254.576 37.0822 256.288 39.9852 256.887 43.2014C257.391 46.0003 256.996 48.8321 257.143 51.1591Z" fill="#FE5C00"/>
                <path d="M103.158 42.5712C103.158 44.0034 103.074 45.4656 103.303 46.8597C103.789 49.8005 106.615 53.3142 111.146 53.1505C114.845 53.0169 114.313 52.7795 114.338 56.2823C114.36 59.556 114.338 59.556 111.026 59.556C103.546 59.526 98.0569 55.1475 96.6383 48.0464C96.5038 47.3195 96.4399 46.5813 96.4474 45.8421C96.4337 39.734 96.4637 33.6286 96.4174 27.5233C96.4174 26.3857 96.7338 25.9301 97.9069 26.001C99.2463 26.0829 100.594 26.0447 101.939 26.001C102.798 25.9792 103.259 26.252 103.169 27.1959C103.115 27.7415 103.169 28.3062 103.169 28.86C103.169 31.6999 103.169 31.6999 106.083 31.6945C107.057 31.6945 108.031 31.6945 109.005 31.6945C109.801 31.6781 110.21 31.9973 110.197 32.8375C110.175 34.2261 110.164 35.6147 110.197 37.0005C110.221 37.8489 109.858 38.1354 109.032 38.1136C107.411 38.0699 105.785 38.1408 104.165 38.0835C103.368 38.0563 103.112 38.3154 103.153 39.1038C103.21 40.2578 103.167 41.4145 103.167 42.5712H103.158Z" fill="#FEA700"/>
                <path d="M171.739 51.1673C171.84 48.6984 171.441 45.7603 172.058 42.8795C173.487 36.2067 178.878 32 186.148 31.7845C189.081 31.6999 189.179 31.6672 189.149 34.6244C189.149 35.7156 189.378 36.7495 188.8 37.5789C188.222 38.4082 186.858 38.089 185.799 38.1518C181.415 38.4246 178.553 41.4254 178.534 45.8503C178.518 49.8769 178.502 53.9062 178.534 57.9356C178.548 59.0977 178.215 59.657 176.955 59.5724C175.751 59.4837 174.542 59.4837 173.337 59.5724C172.001 59.6788 171.657 59.0813 171.701 57.8646C171.785 55.7777 171.739 53.6935 171.739 51.1673Z" fill="#FE8600"/>
                <path d="M227.134 48.6275C227.134 51.822 227.104 55.0138 227.151 58.2056C227.167 59.2341 226.799 59.6051 225.787 59.5697C224.213 59.5124 222.636 59.5315 221.059 59.5697C220.224 59.586 219.799 59.3787 219.804 58.4075C219.837 51.7929 219.837 45.1774 219.804 38.561C219.804 37.7153 220.112 37.3906 220.934 37.4015C222.557 37.4234 224.18 37.4479 225.8 37.4015C226.837 37.3661 227.164 37.7835 227.164 38.7901C227.107 42.0583 227.134 45.3429 227.134 48.6275Z" fill="#FE6900"/>
                <path d="M223.362 35.3119C219.815 35.3119 219.815 35.3119 219.815 31.8009C219.815 31.3862 219.815 30.9825 219.815 30.5541C219.788 29.7794 220.189 29.4793 220.923 29.4848C222.636 29.4848 224.346 29.4848 226.06 29.4848C226.804 29.4848 227.151 29.8394 227.151 30.5923C227.132 31.8391 227.137 33.0858 227.151 34.3325C227.151 35.0227 226.878 35.3419 226.155 35.3146C225.214 35.2819 224.289 35.3091 223.362 35.3119Z" fill="#FE6900"/>
                <path d="M3.50554 46.7669C3.48099 47.0397 3.50554 47.3125 3.25183 47.5226C2.36795 47.7954 2.63802 47.1079 2.6353 46.7342C2.61893 44.1917 2.6353 41.6491 2.6353 39.0957C2.6353 33.0394 2.6353 26.9831 2.6353 20.9269C2.6353 20.4358 2.47707 19.9038 2.84536 19.4592C2.84536 28.0653 2.85445 36.6722 2.87264 45.2801C2.87264 45.6948 2.77988 46.1504 2.91356 46.5187C3.10179 47.0288 3.14271 46.4778 3.25456 46.4123C3.52464 46.3986 3.62285 46.505 3.50554 46.7669Z" fill="#FBF8E6"/>
                <path d="M3.50554 46.7669L3.25183 46.4232C3.35277 46.0003 3.38005 45.5529 3.68559 45.2065L3.97204 45.5584L3.50554 46.7669Z" fill="#EBF4E2"/>
                <path d="M127.097 59.5451C119.259 59.5451 113.058 53.3906 113.088 45.6675C113.118 37.9444 119.262 31.88 127.154 31.82C134.793 31.7599 141.25 38.1354 141.239 45.733C141.228 53.3306 134.877 59.5533 127.097 59.5451ZM134.438 45.7767C134.468 41.5564 131.32 38.31 127.16 38.2663C122.999 38.2227 119.846 41.4663 119.829 45.7084C119.816 49.8687 122.95 53.0905 127.034 53.1178C131.268 53.1451 134.411 50.0269 134.438 45.7767Z" fill="#FE9E00"/>
                <path d="M272.322 59.5424C264.522 59.4769 258.221 53.1751 258.36 45.5802C258.499 37.9117 264.812 31.7299 272.415 31.8172C280.31 31.9072 286.644 38.1899 286.53 45.8176C286.415 53.5298 280.121 59.6078 272.322 59.5424ZM272.461 38.2636C268.301 38.2636 265.161 41.4527 265.147 45.6839C265.134 49.9151 268.26 53.1205 272.428 53.1205C276.597 53.1205 279.737 49.9833 279.742 45.7275C279.748 41.5291 276.559 38.2581 272.461 38.2636Z" fill="#FE5000"/>
            </svg>
        </div>
        <div class="block md:hidden">
            <button class="flex items-center px-3 py-2 border rounded text-gray-900 border-gray-900" @click="changeNavbarState">
            <svg class="fill-current h-3 w-3" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><title>Menu</title><path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"/></svg>
            </button>
        </div>
        <div id="nav-links" ref="navLinks" class="w-full block flex-grow none hidden md:flex md:items-center md:w-auto">
            <div class="text-sm md:flex-grow">
                <a :href="route('pages.admin.tour.index')" class="block mt-4 md:inline-block md:mt-0 mr-4">
                    Passeios
                </a>
                <a :href="route('pages.admin.destination.index')" class="block mt-4 md:inline-block md:mt-0 mr-4">
                    Destinos
                </a>
            </div>
            <div class="flex flex-row">
                <a href="#" class="flex items-center mt-4 md:mt-0 mr-4" @click="logout">
                    <svg id="logout-icon" viewBox="0 0 33 33" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M15 27.5123C15 27.7775 14.8946 28.0319 14.7071 28.2194C14.5196 28.407 14.2652 28.5123 14 28.5123H6C5.73478 28.5123 5.48043 28.407 5.29289 28.2194C5.10536 28.0319 5 27.7775 5 27.5123V5.51233C5 5.24711 5.10536 4.99276 5.29289 4.80522C5.48043 4.61769 5.73478 4.51233 6 4.51233H14C14.2652 4.51233 14.5196 4.61769 14.7071 4.80522C14.8946 4.99276 15 5.24711 15 5.51233C15 5.77755 14.8946 6.0319 14.7071 6.21944C14.5196 6.40697 14.2652 6.51233 14 6.51233H7V26.5123H14C14.2652 26.5123 14.5196 26.6177 14.7071 26.8052C14.8946 26.9928 15 27.2471 15 27.5123ZM28.7075 15.8048L23.7075 10.8048C23.5199 10.6172 23.2654 10.5118 23 10.5118C22.7346 10.5118 22.4801 10.6172 22.2925 10.8048C22.1049 10.9925 21.9994 11.247 21.9994 11.5123C21.9994 11.7777 22.1049 12.0322 22.2925 12.2198L25.5863 15.5123H14C13.7348 15.5123 13.4804 15.6177 13.2929 15.8052C13.1054 15.9928 13 16.2471 13 16.5123C13 16.7775 13.1054 17.0319 13.2929 17.2194C13.4804 17.407 13.7348 17.5123 14 17.5123H25.5863L22.2925 20.8048C22.1049 20.9925 21.9994 21.247 21.9994 21.5123C21.9994 21.7777 22.1049 22.0322 22.2925 22.2198C22.4801 22.4075 22.7346 22.5129 23 22.5129C23.2654 22.5129 23.5199 22.4075 23.7075 22.2198L28.7075 17.2198C28.8005 17.127 28.8742 17.0167 28.9246 16.8953C28.9749 16.7739 29.0008 16.6437 29.0008 16.5123C29.0008 16.3809 28.9749 16.2508 28.9246 16.1294C28.8742 16.008 28.8005 15.8977 28.7075 15.8048Z" fill="#171717"/>
                    </svg>
                    Sair
                </a>
            </div>
        </div>
    </nav>

    <main :id="id">
        <slot/>
    </main>
</template>

<script>
    export default {
        name: 'AdminLayout',
        props:{
          id: {
            type: String,
            default: 'page'
          }
        },
        data() {
            return {
                onComplete: false
            }
        },
        async created() {
            this.onComplete = await Auth.checkAuthentication();
        },
        methods: {
            changeNavbarState() {
                this.$refs.navLinks.classList.toggle('hidden');
            },
            logout() {
                this.onComplete = false;
                Auth.logout();
            }
        }
    };
</script>
